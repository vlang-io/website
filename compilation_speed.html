@t header


<style>
h2 {
	padding-top: 10px;
}

comment {
font-family: 'Roboto Mono'; 
color: #777;
}
</style>


<div class='sep'></div> 

<div class='center'>

<#>Compilation Speed Benchmark</h2> 

<table> 
<tr><td>C<td>5.2s <td style='width:300px'><code>gcc test.c</code>
<tr><td>C++<td>1m 25s <td><code>g++ test.cpp</code>
<tr><td>Zig<td>10.1s <td><code>zig build-exe test.zig</code>
<tr><td>Nim<td>45s <td><code>nim c test.nim</code>
<tr><td>Rust<td style='width:300px'>Stopped after 30 minutes<td><code>rustc test.rs</code> 
<tr><td>Swift<td>Stopped after 30 minutes <td><code>swiftc test.swift</code>
<tr><td>D<td>Segfault after 6 minutes <td><code>dmd test.d</code>

<tr><td>V<td>0.6s <td><code>v test.v</code>
</table> 

<p> 
I wrote a small program that generates 400 000 lines of code in several languages to benchmark their 
compilation speed. 

<p>
All compilers (except Go) don't do optimization in this benchmark.

<p>
<b>update</b> <i>Turns out generating one function with 400k lines of code is a bad idea :)
Go and D segfault, Java simply refuses to compile. I'll modify the test soon. </i> 

<p> 
You can access the code of the generator <a target=_blank href='https://github.com/vlang-io/V/blob/e2a19cccd013cd1f35daa7eb9a89037d22ff8a93/website/compilation_speed_test_gen.v '>here</a>.  

<p> 
It's a bit silly, all it does is generate the following pair of statements 200 000 times:
<pre>a = 1 
println(a) 

a = 2 
println(a) 
... 
</pre> 

<p> 
I'm aware that in no way does this represent real  code, but it can give a general picture,
and all compilers face the same challenge. 
<!-- 
If you have a better idea how to generate code for benchmarking, please let me know, I'll update it. 
--> 


<p> 
Rust and Swift took too long to compile 400k lines, so I tried smaller numbers: 

<table>
<tr><td># lines<td>Rust<td>Swift <td>D 
<tr><td>2k<td>3.4s <td>0.8s 
<tr><td>4k<td>9.0s <td>1.0s 
<tr><td>8k<td>30.8s  <td>2.3s 
<tr><td>20k<td>3m 52s <td>11.8s  <td>4.7s 
<tr><td>100k<td>- <td>5m 57s <td>segfault 
</table> 




 


 




</div> 

	</body>

</html>
@t footer
